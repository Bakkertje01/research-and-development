# Research: interfacing with existing data sources 

### v0.1

##### List of terms

JSON-LD Object - JSON stands for JavaScript Object Notation object for Linked Data
JSON-LD is a World Wide Web Consortium (W3C) Recommendation. It is an open format to provide context and structure to data.
https://en.wikipedia.org/wiki/JSON-LD 

IPFS - IPFS stands for InterPlanetary File-System
IPFS is a protocol designed to create content-adressable, peer-to-peer method of storing and sharing files in a distributed file system. 
Notable IPFS users: The Catalan independence referendum, taking place in September-October 2017, was deemed illegal by the Constitutional Court of Spain and many related websites were blocked. Subsequently, the Catalan Pirate Party mirrored the website on IPFS to bypass the High Court of Justice of Catalonia order of blocking.
https://en.wikipedia.org/wiki/InterPlanetary_File_System

Solidity - Solidity is a contract-oriented, high-level language for implementing smart contracts. 

API - Application programming interface, APIs are sets of requirements that govern how one application can communicate and interact with another.

## Background / Context
**Goal/user story:** 

The Forus platform knows two kinds of validators. Validators like 'RDW' or 'Kadaster' register digital assets; An identity can own/control a digital asset. A validator like a goverment agency validates records (birth certificate) of an identity. The difference between the two types of data is that the assets are interchangable and the records are not.

There are multiple options to add these types of existing data to the blockchain. In this research we will look at a few options with pro's and con's

## Hypothesis:

### Validator adds the data
An identity request his or her data. A validator pushes the requested data to the blockchain using an API from Forus

#### Pro's
- Not labor intensive for the validator. The request can be handled automaticaly 
#### Con's
- Forus needs to build an API that automatically pushes data that is requested.

### Identity (end-user) adds the data
An identity request his or her data. A validator sends the data off-chain to the identity. The identity adds the information to the blockchain.

#### Pro's
- The identity adds the data to the blockchain and no validator is liable for the leakage of these records.
- Existing data communication channels can be used to transfer data from the validator to the requesting identity
#### Con's
- The identity has to add their information themself,

### data registered and stored on the blockchain
#### PRO's
- Data signature is easily handled, who issues the record, directly signs it with his address.
- Data can directly be used in Smart contracts
- Smart contracts are more readable and understandable. The Solidity code is less complicated and therefore more secure.

#### CON'S
- Gas price is high and paid for a single property instead of a set of records. (BirthDate vs Birth Certificate.)
- Storing data on the blockchain is expensive.
- Data is hidden in plain sight. The data is not encrypted and not easily accessible.


##### Validator adds the data to the blockchain
- An identity files an 'insight' request to the validator
- A validator submits a record to a smart contract. (single property like birthDate)
- The claim is registered and the data can be used.

##### Identity adds the data to the blockchain
- An identity submits a record to a smart contract.
- The claim is registered and the data can be used.

### data stored on IPFS, registry on blockchain
#### PRO's
- Only the location of the data is stored on the blockchain and in sets. Storing data on IPFS is less expansive. 
- Data can be stored encrypted.

#### CON'S
- Difficult to implement
- Smart contracts that validate proofs can only be generated by a Zero knowledge compiler and are difficult to read. https://github.com/jstoxrocky/zksnarks_example#verifiersol
- Proofs need to be generated with Zero knowledge. Data can't be used on chain, only proofs of that the data exists.
- The proofer needs an IPFS node to import the data.

##### Validator adds the data to IPFS, registers datalocation on blockchain

Steps:
- An identity files an 'insight' request to the validator.
- Validator makes a JSON-LD object, thats formatted so that it can be used by the Forus Platform
- Validator digitaly signs this JSON object using his private key.
- Validator responds with a signed JSON object. 
- The validator will encrypt this object using their own private key.
- The validator will upload this JSON-LD object to IPFS
- The validator registers the claim on the Ethereum blockchain by submitting the IPFS hash (location), issuer (validator public key)

##### Identity adds the data to IPFS, registers datalocation on blockchain
Steps:
- An identity files an 'insight' request to the validator.
- Validator makes a JSON-LD object, thats formatted so that it can be used by the Forus Platform
- Validator digitaly signs this JSON object using his private key.
- Validator responds with a signed JSON object. 
- Identity uploads this JSON-LD object to IPFS
- The identity registers the claim on the Ethereum blockchain by submitting the IPFS hash (location), issuer(identity's public key)

## Method:
A version of the hypothesis is coded in a smart contract written by @martijndoornik; https://github.com/teamforus/research-and-development/blob/poa001-demo-18-12-2017/demo003-platform/contracts/Identity.sol

An identity registers data on the blockchain by voting. A vote contains a key and a value. Example:
Key: birthDate
Value: 17-10-1990

Any identity can vote for a property. All votes on the key 'birthDate' are counted and when a validation is needed the smart contract returns the value for the highest amount of votes.

## Recomendation

### Short term
Its recommended to start storing data directly on the blockchain. Data can be used directly in a Smart Contract and it makes programming of a smart contract much easier. After more research the method @martijndoornik wrote is not an ideal situation. The better method is that a validator adds the record to blockchain (and pays the gas price) because to have valid information we need the signature of the validator (provided by his address). Currently voting on values is really expensive (each voter pays gas price for a vote). 

Who is a validator on the network? All the nodes decide by voting for a trusted validator. (delegation system)

### Long term
The short-term recomendation has the con that it is very expensive and there is no privacy. On a permissioned testnet (short term) this is not deal-breaking, but on the longer term using ipfs/swarm with zero-knowledge might be the better option to provide privacy and maybe reduce costs.


